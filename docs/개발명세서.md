### **JWT 인증 기능 개발 명세서**

**1. 목표**

기존 Todo List API에 JWT(JSON Web Token) 기반의 사용자 인증/인가 기능을 추가한다. 사용자는 회원가입 및 로그인을 할 수 있으며, 로그인 후 발급받은 토큰을 통해서만 자신의 할 일 목록을 관리할 수 있다.

**2. 주요 구현 단계**

1.  **라이브러리 추가 및 환경 설정**
    *   `requirements.txt` 파일에 `Flask-JWT-Extended`를 추가한다.
    *   `pip`를 이용해 해당 라이브러리를 가상 환경에 설치한다.
    *   Flask `app` 설정에 `JWT_SECRET_KEY`를 추가하여 JWT 서명에 사용할 비밀 키를 설정한다.

2.  **데이터 구조 확장**
    *   기존 인메모리 데이터 저장소에 사용자 정보를 저장할 `USERS` 딕셔너리를 추가한다.
    *   `TODOS` 딕셔너리의 각 항목에 소유자를 식별하기 위한 `user_id` 필드를 추가한다.

3.  **사용자 인증 기능 구현**
    *   **비밀번호 처리:**
        *   회원가입 시 `werkzeug.security`의 `generate_password_hash` 함수를 사용해 비밀번호를 해시로 변환하여 저장한다.
        *   로그인 시 `check_password_hash` 함수를 사용해 입력된 비밀번호와 저장된 해시를 비교한다.
    *   **엔드포인트 구현:**
        *   `/auth` 네임스페이스를 생성한다.
        *   `/auth/signup`: `username` 중복을 확인하고, 중복이 아닐 경우 비밀번호를 해싱하여 새 사용자를 `USERS`에 저장한다.
        *   `/auth/login`: 사용자 정보를 확인하고, 성공 시 `flask_jwt_extended`의 `create_access_token` 함수로 JWT를 생성하여 반환한다.

4.  **API 보호 및 로직 수정**
    *   **엔드포인트 보호:**
        *   기존 `/todos` 네임스페이스의 모든 `Resource` 메소드(get, post, put, delete)에 `@jwt_required()` 데코레이터를 추가하여 JWT가 있어야만 접근 가능하도록 설정한다.
    *   **소유권 기반 로직:**
        *   `@jwt_required()`로 보호된 엔드포인트 내에서 `get_jwt_identity()` 함수를 호출하여 현재 요청을 보낸 사용자의 `id`를 가져온다.
        *   모든 할 일 관련 로직(조회, 생성, 수정, 삭제)은 `get_jwt_identity()`로 얻은 `user_id`를 기반으로, 해당 사용자에게 귀속된 데이터에 대해서만 수행되도록 수정한다.

**3. 테스트 전략**

1.  **인증 테스트:**
    *   회원가입 API를 호출하여 사용자를 생성한다.
    *   로그인 API를 호출하여 Access Token을 발급받는다.
2.  **API 접근 테스트:**
    *   Access Token 없이 Todo API 호출 시 `401 Unauthorized` 에러가 발생하는지 확인한다.
    *   유효한 Access Token으로 Todo API 호출 시 `200 OK` 응답을 받는지 확인한다.
3.  **데이터 격리 테스트:**
    *   사용자 A의 토큰으로 사용자 B의 할 일을 조회/수정/삭제하려고 할 때, 접근이 거부되거나 (404 Not Found) 데이터가 보이지 않는지 확인한다.
